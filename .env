# Database
DATABASE_URL="postgresql://app_user:123@localhost:5432/app_db"

# API server
PORT=3000

# Scheduler
SCHEDULER_TZ=Asia/Shanghai
CRON_SCHEDULE=*/10 * * * * *   # run every 10 seconds (adjust as needed)
CRON_SCHEDULE_V2=0 0 * * * *   # once per hour

OPENAI_API_KEY=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

# Model to use for predictions
PRED_MODEL=gpt-4.1-mini

# Temperature for non-GPT-5 models (0 = deterministic, 1 = more random)
PRED_TEMPERATURE=0.7

# How many past spins to look back when computing stats
PRED_LOOKBACK=all

# How many top hot/cold numbers to extract
PRED_TOPK=5

# Throttle analyzer
PRED_MIN_SECONDS=40

# Reversal detection
REVERSAL_SHORT_MIN=10
REVERSAL_LONG_MIN=60
REVERSAL_DELTA=0.10

# Transitions learning
TRANSITIONS_MIN_COUNT=2

# --- Prediction Timing Rules ---
FIRST_PREDICT_DELAY_MIN=20   # wait 20 minutes before first prediction in each new window
PRED_PAUSE_AFTER_WRONGS=3    # 3 consecutive wrongs -> cooldown
PRED_PAUSE_MIN=15            # cooldown duration (can bump to 20 if you want stricter)

# --- AI Trigger Limits ---
AI_MAX_PER_DAY=30            # << upped to 30/day
AI_MIN_GAP_HOURS=0.25        # << 15 minutes between AI predictions (so 30/day is achievable)
AI_MAX_PER_WINDOW=1          # at most one AI call in a single 2h window
AI_STREAK_MAX_WRONGS=3       # 3 consecutive AI wrongs -> AI-only cooldown
AI_STREAK_COOLDOWN_MIN=120   # AI-only cooldown length in minutes

# --- Observation Stability ---
OBSERVE_LOOKBACK=30
OBSERVE_MAX_RUN=3
OBSERVE_MIN_COLORS=5

# --- Prediction Weights ---
W_GAP_PRESSURE=0.22
W_STREAK_BREAK=0.18
W_COLOR_BALANCE=0.14
W_PARITY_ROTATIONSoy=0.18
W_SIZE_REGIME=0.18
W_REACTIVATION=0.10
W_QUAD_PARITY=0.08
W_TREND_REVERSAL=0.06