# Database
DATABASE_URL=postgresql://app_user:123@localhost:5432/app_db

# API server
PORT=3000

# Scheduler
SCHEDULER_TZ=Asia/Shanghai
CRON_SCHEDULE=*/10 * * * * *   # run every 10 seconds (adjust as needed)
CRON_SCHEDULE_V2=0 * * * * *

OPENAI_API_KEY=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

# Model to use for predictions
# Options: gpt-4.1-mini (default), gpt-4.1, gpt-5-mini, gpt-5
PRED_MODEL=gpt-4.1-mini

# Temperature for non-GPT-5 models (0 = deterministic, 1 = more random)
PRED_TEMPERATURE=0.7

# How many past spins to look back when computing stats
PRED_LOOKBACK=all

# How many top hot/cold numbers to extract
PRED_TOPK=5

# Prevents the analyzer from hammering OpenAI on every new screenshot too fast
PRED_MIN_SECONDS=40

UPLOAD_TOKEN=supersecret

REVERSAL_SHORT_MIN=10
REVERSAL_LONG_MIN=60
REVERSAL_DELTA=0.10
TRANSITIONS_MIN_COUNT=2

# --- Prediction Timing Rules ---
FIRST_PREDICT_DELAY_MIN=20      # Wait 20 minutes before first prediction in each new window
PRED_PAUSE_AFTER_WRONGS=3       # If 3 consecutive wrongs, enter cooldown
PRED_PAUSE_MIN=15               # Cooldown duration (you can increase to 20 for stricter mode)

# --- AI Trigger Limits ---
AI_MAX_PER_DAY=3                # Max AI predictions per day
AI_MIN_GAP_HOURS=6              # Minimum gap between two AI predictions
AI_MAX_PER_WINDOW=1             # Max AI predictions allowed in a single window

# --- Observation Stability ---
OBSERVE_LOOKBACK=30             # Check last 30 results for stabilization
OBSERVE_MAX_RUN=3               # Max allowed color run length before considered unstable
OBSERVE_MIN_COLORS=5            # Must have at least 5 distinct colors to exit observe mode

# --- Prediction Weights (already good) ---
W_GAP_PRESSURE=0.22
W_STREAK_BREAK=0.18
W_COLOR_BALANCE=0.14
W_PARITY_ROTATION=0.18
W_SIZE_REGIME=0.18
W_REACTIVATION=0.10
W_QUAD_PARITY=0.08
W_TREND_REVERSAL=0.06